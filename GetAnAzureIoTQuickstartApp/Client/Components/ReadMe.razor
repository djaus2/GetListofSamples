@* @page "/BlazorComponent/{Title}" Uncomment if you want Component to be available via URL *@
@page "/readme/{Id}"
@using GetAnAzureIoTQuickstartApp.Shared
@using ProjectClasses
@using GetAnAzureIoTQuickstartApp.Client.Components
@inject HttpClient Http
@inject Services.SamplesClient _SamplesClient
@inject NavigationManager navigationManager
@using  GetAnAzureIoTQuickstartApp.Client.Services;

<br />
<MarkdownModel Content=@TextToCopy />
<br />


@code {
    [Parameter]
    public string FolderId { get; set; }

    [Parameter]
    public string MarkdownFilename { get; set; }

    ProjectClasses.FolderTree Folder { get; set; }
    string TextToCopy { get; set; }


    protected override void OnAfterRender(bool firstRender)
    {

    }


    //bool done = false;
    protected async override Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        int id = int.Parse(FolderId);

        string folderReadMe = $"{MarkdownFilename}~{id}~md";
        TextToCopy = await _SamplesClient.GetFile(folderReadMe);
        StateHasChanged();
    }
}

